<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Xem trước font</title>
    
    <!-- CSS Styles -->
    <style>
        /* Base styling */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f7f7f7;
        }
        
        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 15px;
        }
        
        /* Header and control panel */
        .control-panel {
            position: sticky;
            top: 0;
            background-color: white;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            padding: 15px 0;
            z-index: 100;
        }
        
        h1 {
            margin-bottom: 15px;
            color: #333;
            text-align: center;
            font-size: 22px;
        }
        
        .controls {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .text-input-container {
            width: 100%;
        }
        
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #555;
        }
        
        textarea {
            width: 100%;
            height: 40px;
            min-height: 40px;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 16px;
            resize: none;
            overflow: hidden;
        }
        
        .options-container {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            align-items: center;
        }
        
        .size-container {
            flex: 1;
            min-width: 200px;
        }
        
        input[type="range"] {
            width: 100%;
            margin: 10px 0;
        }
        
        .color-container {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .color-options {
            display: flex;
            gap: 10px;
        }
        
        .color-option {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            border: 2px solid #ddd;
            cursor: pointer;
            transition: transform 0.2s;
        }
        
        .color-option:hover {
            transform: scale(1.1);
        }
        
        .color-option.active {
            border-color: #555;
            transform: scale(1.1);
        }
        
        /* Font preview grid */
        .font-preview-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin: 30px 0;
        }
        
        .font-preview {
            background-color: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        }
        
        .font-name {
            font-size: 16px;
            margin-bottom: 10px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
            color: #666;
        }
        
        .preview-text {
            word-wrap: break-word;
            overflow-wrap: break-word;
            overflow: hidden;
        }
        
        /* Responsive design */
        @media (max-width: 960px) {
            .font-preview-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        @media (max-width: 600px) {
            .font-preview-grid {
                grid-template-columns: 1fr;
            }
            
            .options-container {
                flex-direction: column;
                align-items: stretch;
            }
            
            .color-container {
                justify-content: flex-start;
            }
        }

        /* Font definitions */
        
        @font-face {
            font-family: 'VNI-Times-Italic';
            src: url('Fonts/VNI-Times-Italic.ttf') format('truetype');
            font-weight: normal;
            font-style: italic;
        }
	@font-face {
            font-family: 'VNI-Helve';
            src: url('Fonts/VNI-Helve.ttf') format('truetype');
            font-weight: normal;
            font-style: normal;
        }
	@font-face {
            font-family: 'VNI-Chaucer';
            src: url('Fonts/VNI-Chaucer.ttf') format('truetype');
            font-weight: normal;
            font-style: normal;
        }
	@font-face {
            font-family: 'VNI-Centur';
            src: url('Fonts/VNI-Centur.ttf') format('truetype');
            font-weight: normal;
            font-style: normal;
        }
	@font-face {
            font-family: 'VNI-Briquet';
            src: url('Fonts/VNI-Briquet.ttf') format('truetype');
            font-weight: normal;
            font-style: normal;
        }
	@font-face {
            font-family: 'VNI-Bodon';
            src: url('Fonts/VNI-Bodon.ttf') format('truetype');
            font-weight: normal;
            font-style: normal;
        }
	@font-face {
            font-family: 'VNI-Bengus';
            src: url('Fonts/VNI-Bengus.ttf') format('truetype');
            font-weight: normal;
            font-style: normal;
        }    
	@font-face {
            font-family: 'VNI-Commerce';
            src: url('Fonts/VNI-Commerce.ttf') format('truetype');
            font-weight: normal;
            font-style: normal;
        }
        @font-face {
            font-family: 'VNI-Aptima';
            src: url('Fonts/VNI-Aptima.ttf') format('truetype');
            font-weight: normal;
            font-style: normal;
        }
        
        
	@font-face {
            font-family: 'VNI-Zap';
            src: url('Fonts/VNI-Zap.ttf') format('truetype');
            font-weight: normal;
            font-style: normal;
        }
	@font-face {
            font-family: 'VNI-Upital';
            src: url('Fonts/VNI-Upital.ttf') format('truetype');
            font-weight: normal;
            font-style: normal;
        }  
	@font-face {
            font-family: 'VNI-Times';
            src: url('Fonts/VNI-Times.ttf') format('truetype');
            font-weight: normal;
            font-style: normal;
        }      
    </style>
</head>
<body>
    <header class="control-panel">
        <div class="container">
            <h1>Xem trước font</h1>
            <div class="controls">
                <div class="text-input-container">
                    <label for="sample-text">Nhập nội dung:</label>
                    <textarea id="sample-text" placeholder="Type here...">Nội dung dấu</textarea>
                </div>
                <div class="options-container">
                    <div class="size-container">
                        <label for="font-size">Kích thước: <span id="size-value">24</span>px</label>
                        <input type="range" id="font-size" min="12" max="72" value="24" step="1">
                    </div>
                    <div class="color-container">
                        <label>Màu: </label>
                        <div class="color-options">
                            <button class="color-option active" data-color="#000000" style="background-color: #000000;"></button>
                            <button class="color-option" data-color="#FF0000" style="background-color: #FF0000;"></button>
                            <button class="color-option" data-color="#0000FF" style="background-color: #0000FF;"></button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <main class="container">
        <div class="font-preview-grid">
            <!-- Font previews will be inserted here via JavaScript -->
        </div>
    </main>

    <script>
        /**
         * Unicode to VNI Conversion Function
         * This function converts Unicode Vietnamese text to VNI encoded text
         * for proper display in VNI fonts.
         */
        function unicodeToVni(text) {
            if (!text) return '';
            
            // Define mapping from Unicode to VNI
            const conversionMap = {
                // Vowels with diacritics
                'á': 'aù', 'à': 'aø', 'ả': 'aû', 'ã': 'aõ', 'ạ': 'aï',
				'ă': 'aê', 'ắ': 'aé', 'ằ': 'aè', 'ẳ': 'aú', 'ẵ': 'aü', 'ặ': 'aë',
				'â': 'aâ', 'ấ': 'aá', 'ầ': 'aà', 'ẩ': 'aå', 'ẫ': 'aã', 'ậ': 'aä',
				'é': 'eù', 'è': 'eø', 'ẻ': 'eû', 'ẽ': 'eõ', 'ẹ': 'eï',
				'ê': 'eâ', 'ế': 'eá', 'ề': 'eà', 'ể': 'eå', 'ễ': 'eã', 'ệ': 'eä',
				'í': 'í', 'ì': 'ì', 'ỉ': 'æ', 'ĩ': 'ó', 'ị': 'ò',
				'ó': 'où', 'ò': 'oø', 'ỏ': 'oû', 'õ': 'oõ', 'ọ': 'oï',
				'ô': 'oâ', 'ố': 'oá', 'ồ': 'oà', 'ổ': 'oå', 'ỗ': 'oã', 'ộ': 'oä',
				'ơ': 'ô', 'ớ': 'ôù', 'ờ': 'ôø', 'ở': 'ôû', 'ỡ': 'ôõ', 'ợ': 'ôï',
				'ú': 'uù', 'ù': 'uø', 'ủ': 'uû', 'ũ': 'uõ', 'ụ': 'uï',
				'ư': 'ö', 'ứ': 'öù', 'ừ': 'öø', 'ử': 'öû', 'ữ': 'öõ', 'ự': 'öï',
				'ý': 'yù', 'ỳ': 'yø', 'ỷ': 'yû', 'ỹ': 'yõ', 'ỵ': 'î',
				'đ': 'ñ',
                
                // Capital letters
                'Á': 'AÙ', 'À': 'AØ', 'Ả': 'AÛ', 'Ã': 'AÕ', 'Ạ': 'AÏ',
				'Ă': 'AÊ', 'Ắ': 'AÉ', 'Ằ': 'AÈ', 'Ẳ': 'AÚ', 'Ẵ': 'AÜ', 'Ặ': 'AË',
				'Â': 'AÂ', 'Ấ': 'AÁ', 'Ầ': 'AÀ', 'Ẩ': 'AÅ', 'Ẫ': 'AÃ', 'Ậ': 'AÄ',
				'É': 'EÙ', 'È': 'EØ', 'Ẻ': 'EÛ', 'Ẽ': 'EÕ', 'Ẹ': 'EÏ',
				'Ê': 'EÂ', 'Ế': 'EÁ', 'Ề': 'EÀ', 'Ể': 'EÅ', 'Ễ': 'EÃ', 'Ệ': 'EÄ',
				'Í': 'Í', 'Ì': 'Ì', 'Ỉ': 'Æ', 'Ĩ': 'Ó', 'Ị': 'Ò',
				'Ó': 'OÙ', 'Ò': 'OØ', 'Ỏ': 'OÛ', 'Õ': 'OÕ', 'Ọ': 'OÏ',
				'Ô': 'OÂ', 'Ố': 'OÁ', 'Ồ': 'OÀ', 'Ổ': 'OÅ', 'Ỗ': 'OÃ', 'Ộ': 'OÄ',
				'Ơ': 'Ô', 'Ớ': 'ÔÙ', 'Ờ': 'ÔØ', 'Ở': 'ÔÛ', 'Ỡ': 'ÔÕ', 'Ợ': 'ÔÏ',
				'Ú': 'UÙ', 'Ù': 'UØ', 'Ủ': 'UÛ', 'Ũ': 'UÕ', 'Ụ': 'UÏ',
				'Ư': 'Ö', 'Ứ': 'ÖÙ', 'Ừ': 'ÖØ', 'Ử': 'ÖÛ', 'Ữ': 'ÖÕ', 'Ự': 'ÖÏ',
				'Ý': 'YÙ', 'Ỳ': 'YØ', 'Ỷ': 'YÛ', 'Ỹ': 'YÕ', 'Ỵ': 'Î',
				'Đ': 'Ñ'
            };
        
            // Create a regular expression to match all characters to be replaced
            const regex = new RegExp(Object.keys(conversionMap).join('|'), 'g');
        
            // Replace each matched character with its VNI equivalent
            return text.replace(regex, match => conversionMap[match]);
        }

        document.addEventListener('DOMContentLoaded', function() {
            // Font configurations
            const fontFamilies = [
                { name: 'Font 01', family: 'Times New Roman', requiresVni: false, transform: 'uppercase' }, 	//1
		{ name: 'VNI-Helve', family: 'VNI-Helve', requiresVni: true },   				//2
		{ name: 'VNI-Times (Italic)', family: 'Times New Roman', requiresVni: false, style: 'italic' },	//3
                { name: 'Times New Roman', family: 'Times New Roman', requiresVni: false },			//4
		{ name: 'VNI-Chaucer', family: 'VNI-Chaucer', requiresVni: true },				//5
		{ name: 'VNI-Centur', family: 'VNI-Centur', requiresVni: true },				//6
		{ name: 'VNI-Briquet', family: 'VNI-Briquet', requiresVni: true },				//7
		{ name: 'VNI-Bodon', family: 'VNI-Bodon', requiresVni: true },					//8
		{ name: 'VNI-Bengus', family: 'VNI-Bengus', requiresVni: true },				//9
		{ name: 'VNI-Commerce', family: 'VNI-Commerce', requiresVni: true },				//10
               	{ name: 'VNI-Zap', family: 'VNI-Zap', requiresVni: true },					//11
		{ name: 'VNI-Upital', family: 'VNI-Upital', requiresVni: true },				//12
		{ name: 'Arial', family: 'Arial', requiresVni: false }						//13
                
            ];
        
            // DOM elements
            const sampleTextInput = document.getElementById('sample-text');
            const fontSizeSlider = document.getElementById('font-size');
            const sizeValueDisplay = document.getElementById('size-value');
            const colorOptions = document.querySelectorAll('.color-option');
            const previewGrid = document.querySelector('.font-preview-grid');
        
            // Initial state
            let currentText = sampleTextInput.value;
            let currentSize = fontSizeSlider.value;
            let currentColor = '#000000'; // Default black
        
            // Initialize font previews
            createFontPreviews();
        
            // Event listeners
            sampleTextInput.addEventListener('input', function() {
                currentText = this.value;
                updatePreviews();
                
                // Auto-adjust height for one-line text
                this.style.height = 'auto';
                this.style.height = Math.min(40, this.scrollHeight) + 'px';
            });
        
            fontSizeSlider.addEventListener('input', function() {
                currentSize = this.value;
                sizeValueDisplay.textContent = currentSize;
                updatePreviews();
            });
        
            colorOptions.forEach(option => {
                option.addEventListener('click', function() {
                    // Remove active class from all options
                    colorOptions.forEach(opt => opt.classList.remove('active'));
                    // Add active class to selected option
                    this.classList.add('active');
                    // Update current color
                    currentColor = this.getAttribute('data-color');
                    updatePreviews();
                });
            });
        
            // Function to create font preview elements
            function createFontPreviews() {
                previewGrid.innerHTML = ''; // Clear existing previews
                
                fontFamilies.forEach(font => {
                    const previewElement = document.createElement('div');
                    previewElement.className = 'font-preview';
                    
                    const fontNameElement = document.createElement('h3');
                    fontNameElement.className = 'font-name';
                    fontNameElement.textContent = font.name;
                    
                    const previewTextElement = document.createElement('p');
                    previewTextElement.className = 'preview-text';
                    previewTextElement.setAttribute('data-font-family', font.family);
                    previewTextElement.setAttribute('data-requires-vni', font.requiresVni);
                    
                    // Set initial text and styling
                    updatePreviewText(previewTextElement, currentText, font.requiresVni);
                    previewTextElement.style.fontFamily = font.family;
                    previewTextElement.style.fontSize = `${currentSize}px`;
                    previewTextElement.style.color = currentColor;
                    
                    // Apply additional styles if specified
                    if (font.style) {
                        previewTextElement.style.fontStyle = font.style;
                    }
                    
                    // Apply text transform if specified
                    if (font.transform) {
                        previewTextElement.style.textTransform = font.transform;
                    }
                    
                    previewElement.appendChild(fontNameElement);
                    previewElement.appendChild(previewTextElement);
                    previewGrid.appendChild(previewElement);
                });
            }
        
            // Function to update preview text with proper conversion
            function updatePreviewText(element, text, requiresVni) {
                if (requiresVni) {
                    element.textContent = unicodeToVni(text);
                } else {
                    element.textContent = text;
                }
            }
        
            // Function to update all previews
            function updatePreviews() {
                const previewTexts = document.querySelectorAll('.preview-text');
                
                previewTexts.forEach((preview, index) => {
                    const requiresVni = preview.getAttribute('data-requires-vni') === 'true';
                    const font = fontFamilies[index];
                    
                    updatePreviewText(preview, currentText, requiresVni);
                    preview.style.fontSize = `${currentSize}px`;
                    preview.style.color = currentColor;
                    
                    // Ensure styles and transforms are maintained when updating
                    if (font.style) {
                        preview.style.fontStyle = font.style;
                    }
                    
                    if (font.transform) {
                        preview.style.textTransform = font.transform;
                    }
                });
            }
        
            // Call initial update to ensure everything is rendered correctly
            updatePreviews();
        });
    </script>
</body>
</html>
